{"version":3,"file":"index.cjs.js","sources":["../src/generator.js","../src/generation.js","../index.js"],"sourcesContent":["export default function generator(source) {\n  if (typeof source === 'function') {\n    return source;\n  } else if (typeof source[Symbol.iterator] === 'function') {\n    return function* generate() {\n      yield* source;\n    }\n  } else {\n    throw new Error(`'${source}' must be either a generator function or an iterable`);\n  }\n}\n","import generator from './generator';\n\nexport default class Generation {\n  constructor(source = []) {\n    Object.defineProperty(this, Symbol.iterator, {\n      value: generator(source)\n    });\n  }\n\n  get length() {\n    let length = 0;\n    for (let x of this) { length++; }\n    return length;\n  }\n\n  equals(source) {\n    return this.disjunct(source).length === 0;\n  }\n\n  map(fn) {\n    return new Generation(function*() {\n      for (let x of this) {\n        yield fn(x);\n      }\n    }.bind(this));\n  }\n\n  filter(fn) {\n    return new Generation(function*() {\n      for (let item of this) {\n        if (fn(item)) {\n          yield item;\n        }\n      }\n    }.bind(this))\n  }\n\n  concat(source) {\n    return new Generation(function*() {\n      yield* this;\n      yield* new Generation(source);\n    }.bind(this));\n  }\n\n  union(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      for (let x of this) {\n        if (!seen.has(x)) {\n          seen.add(x);\n          yield x;\n        }\n      }\n      for (let y of new Generation(source)) {\n        if (!seen.has(y)) {\n          seen.add(y);\n          yield y;\n        }\n      }\n    }.bind(this));\n  }\n\n  intersect(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      for (let x of new Generation(source)) {\n        seen.add(x);\n      }\n      yield* this.filter(y => seen.has(y))\n    }.bind(this));\n  }\n\n  disjunct(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      let disjunction = new Set();\n      for (let x of this) {\n        seen.add(x)\n        disjunction.add(x);\n      }\n      for (let y of new Generation(source)) {\n        if (seen.has(y)) {\n          disjunction.delete(y);\n        } else {\n          yield y;\n        }\n      }\n      yield* disjunction;\n    }.bind(this))\n  }\n\n  reduce(fn, initial) {\n    let result = initial;\n    function reduce(fn, iterator, result) {\n      let next = iterator.next();\n      if (next.done) {\n        return result;\n      } else {\n        return reduce(fn, iterator, fn(result, next.value))\n      }\n    }\n\n    return reduce(fn, this[Symbol.iterator](), initial);\n  }\n}\n","import _Generation from './src/generation';\n\nexport function Generation(iterable) {\n  return new _Generation(iterable);\n}\n\nexport function map(iterable, fn) {\n  return Generation(iterable).map(fn);\n}\n\nexport function filter(iterable, fn) {\n  return Generation(iterable).filter(fn);\n}\n\nexport function concat(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.concat(iterable);\n  }, Generation());\n}\n\nexport function union(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.union(iterable);\n  }, Generation());\n}\n\nexport function intersect(first, ...iterables) {\n  if (first) {\n    return Generation(first).intersect(union(...iterables));\n  } else {\n    return Generation();\n  }\n}\n\nexport function disjunct(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.disjunct(iterable);\n  }, Generation())\n}\n\nexport function reduce(source, fn, initial) {\n  return Generation(source).reduce(fn, initial);\n}\n\nexport function equals(left, right) {\n  return Generation(left).equals(right);\n}\n\nexport default Generation;\n"],"names":["generator","source","Symbol","iterator","generate","Error","Generation","constructor","Object","defineProperty","value","length","x","equals","disjunct","map","fn","bind","filter","item","concat","union","seen","Set","has","add","y","intersect","disjunction","delete","reduce","initial","result","next","done","iterable","_Generation","iterables","generation","first","left","right"],"mappings":";;;;AAAe,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;MACpC,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;WACzBA,MAAP;GADF,MAEO,IAAI,OAAOA,MAAM,CAACC,MAAM,CAACC,QAAR,CAAb,KAAmC,UAAvC,EAAmD;WACjD,UAAUC,QAAV,GAAqB;aACnBH,MAAP;KADF;GADK,MAIA;UACC,IAAII,KAAJ,CAAW,IAAGJ,MAAO,sDAArB,CAAN;;;;ACNW,MAAMK,UAAN,CAAiB;EAC9BC,WAAW,CAACN,MAAM,GAAG,EAAV,EAAc;IACvBO,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BP,MAAM,CAACC,QAAnC,EAA6C;MAC3CO,KAAK,EAAEV,SAAS,CAACC,MAAD;KADlB;;;MAKEU,MAAJ,GAAa;QACPA,MAAM,GAAG,CAAb;;;;;;2BACc,IAAd,8HAAoB;YAAXC,CAAW;QAAED,MAAM;;;;;;;;;;;;;;;;;WACrBA,MAAP;;;EAGFE,MAAM,CAACZ,MAAD,EAAS;WACN,KAAKa,QAAL,CAAcb,MAAd,EAAsBU,MAAtB,KAAiC,CAAxC;;;EAGFI,GAAG,CAACC,EAAD,EAAK;WACC,IAAIV,UAAJ,CAAe,aAAY;;;;;;8BAClB,IAAd,mIAAoB;cAAXM,CAAW;gBACZI,EAAE,CAACJ,CAAD,CAAR;;;;;;;;;;;;;;;;KAFkB,CAIpBK,IAJoB,CAIf,IAJe,CAAf,CAAP;;;EAOFC,MAAM,CAACF,EAAD,EAAK;WACF,IAAIV,UAAJ,CAAe,aAAY;;;;;;8BACf,IAAjB,mIAAuB;cAAda,IAAc;;cACjBH,EAAE,CAACG,IAAD,CAAN,EAAc;kBACNA,IAAN;;;;;;;;;;;;;;;;;KAHgB,CAMpBF,IANoB,CAMf,IANe,CAAf,CAAP;;;EASFG,MAAM,CAACnB,MAAD,EAAS;WACN,IAAIK,UAAJ,CAAe,aAAY;aACzB,IAAP;aACO,IAAIA,UAAJ,CAAeL,MAAf,CAAP;KAFoB,CAGpBgB,IAHoB,CAGf,IAHe,CAAf,CAAP;;;EAMFI,KAAK,CAACpB,MAAD,EAAS;WACL,IAAIK,UAAJ,CAAe,aAAY;UAC5BgB,IAAI,GAAG,IAAIC,GAAJ,EAAX;;;;;;8BACc,IAAd,mIAAoB;cAAXX,CAAW;;cACd,CAACU,IAAI,CAACE,GAAL,CAASZ,CAAT,CAAL,EAAkB;YAChBU,IAAI,CAACG,GAAL,CAASb,CAAT;kBACMA,CAAN;;;;;;;;;;;;;;;;;;;;;;;8BAGU,IAAIN,UAAJ,CAAeL,MAAf,CAAd,mIAAsC;cAA7ByB,CAA6B;;cAChC,CAACJ,IAAI,CAACE,GAAL,CAASE,CAAT,CAAL,EAAkB;YAChBJ,IAAI,CAACG,GAAL,CAASC,CAAT;kBACMA,CAAN;;;;;;;;;;;;;;;;;KAXgB,CAcpBT,IAdoB,CAcf,IAde,CAAf,CAAP;;;EAiBFU,SAAS,CAAC1B,MAAD,EAAS;WACT,IAAIK,UAAJ,CAAe,aAAY;UAC5BgB,IAAI,GAAG,IAAIC,GAAJ,EAAX;;;;;;8BACc,IAAIjB,UAAJ,CAAeL,MAAf,CAAd,mIAAsC;cAA7BW,CAA6B;UACpCU,IAAI,CAACG,GAAL,CAASb,CAAT;;;;;;;;;;;;;;;;;aAEK,KAAKM,MAAL,CAAYQ,CAAC,IAAIJ,IAAI,CAACE,GAAL,CAASE,CAAT,CAAjB,CAAP;KALoB,CAMpBT,IANoB,CAMf,IANe,CAAf,CAAP;;;EASFH,QAAQ,CAACb,MAAD,EAAS;WACR,IAAIK,UAAJ,CAAe,aAAY;UAC5BgB,IAAI,GAAG,IAAIC,GAAJ,EAAX;UACIK,WAAW,GAAG,IAAIL,GAAJ,EAAlB;;;;;;8BACc,IAAd,mIAAoB;cAAXX,CAAW;UAClBU,IAAI,CAACG,GAAL,CAASb,CAAT;UACAgB,WAAW,CAACH,GAAZ,CAAgBb,CAAhB;;;;;;;;;;;;;;;;;;;;;;8BAEY,IAAIN,UAAJ,CAAeL,MAAf,CAAd,mIAAsC;cAA7ByB,CAA6B;;cAChCJ,IAAI,CAACE,GAAL,CAASE,CAAT,CAAJ,EAAiB;YACfE,WAAW,CAACC,MAAZ,CAAmBH,CAAnB;WADF,MAEO;kBACCA,CAAN;;;;;;;;;;;;;;;;;;aAGGE,WAAP;KAdoB,CAepBX,IAfoB,CAef,IAfe,CAAf,CAAP;;;EAkBFa,MAAM,CAACd,EAAD,EAAKe,OAAL,EAAc;AAClB;aACSD,MAAT,CAAgBd,EAAhB,EAAoBb,QAApB,EAA8B6B,MAA9B,EAAsC;UAChCC,IAAI,GAAG9B,QAAQ,CAAC8B,IAAT,EAAX;;UACIA,IAAI,CAACC,IAAT,EAAe;eACNF,MAAP;OADF,MAEO;eACEF,MAAM,CAACd,EAAD,EAAKb,QAAL,EAAea,EAAE,CAACgB,MAAD,EAASC,IAAI,CAACvB,KAAd,CAAjB,CAAb;;;;WAIGoB,MAAM,CAACd,EAAD,EAAK,KAAKd,MAAM,CAACC,QAAZ,GAAL,EAA8B4B,OAA9B,CAAb;;;;;ACpGG,SAASzB,YAAT,CAAoB6B,QAApB,EAA8B;SAC5B,IAAIC,UAAJ,CAAgBD,QAAhB,CAAP;;AAGF,AAAO,SAASpB,GAAT,CAAaoB,QAAb,EAAuBnB,EAAvB,EAA2B;SACzBV,YAAU,CAAC6B,QAAD,CAAV,CAAqBpB,GAArB,CAAyBC,EAAzB,CAAP;;AAGF,AAAO,SAASE,MAAT,CAAgBiB,QAAhB,EAA0BnB,EAA1B,EAA8B;SAC5BV,YAAU,CAAC6B,QAAD,CAAV,CAAqBjB,MAArB,CAA4BF,EAA5B,CAAP;;AAGF,AAAO,SAASI,MAAT,CAAgB,GAAGiB,SAAnB,EAA8B;SAC5BA,SAAS,CAACP,MAAV,CAAiB,CAACQ,UAAD,EAAaH,QAAb,KAA0B;WACzCG,UAAU,CAAClB,MAAX,CAAkBe,QAAlB,CAAP;GADK,EAEJ7B,YAAU,EAFN,CAAP;;AAKF,AAAO,SAASe,KAAT,CAAe,GAAGgB,SAAlB,EAA6B;SAC3BA,SAAS,CAACP,MAAV,CAAiB,CAACQ,UAAD,EAAaH,QAAb,KAA0B;WACzCG,UAAU,CAACjB,KAAX,CAAiBc,QAAjB,CAAP;GADK,EAEJ7B,YAAU,EAFN,CAAP;;AAKF,AAAO,SAASqB,SAAT,CAAmBY,KAAnB,EAA0B,GAAGF,SAA7B,EAAwC;MACzCE,KAAJ,EAAW;WACFjC,YAAU,CAACiC,KAAD,CAAV,CAAkBZ,SAAlB,CAA4BN,KAAK,CAAC,GAAGgB,SAAJ,CAAjC,CAAP;GADF,MAEO;WACE/B,YAAU,EAAjB;;;AAIJ,AAAO,SAASQ,QAAT,CAAkB,GAAGuB,SAArB,EAAgC;SAC9BA,SAAS,CAACP,MAAV,CAAiB,CAACQ,UAAD,EAAaH,QAAb,KAA0B;WACzCG,UAAU,CAACxB,QAAX,CAAoBqB,QAApB,CAAP;GADK,EAEJ7B,YAAU,EAFN,CAAP;;AAKF,AAAO,SAASwB,MAAT,CAAgB7B,MAAhB,EAAwBe,EAAxB,EAA4Be,OAA5B,EAAqC;SACnCzB,YAAU,CAACL,MAAD,CAAV,CAAmB6B,MAAnB,CAA0Bd,EAA1B,EAA8Be,OAA9B,CAAP;;AAGF,AAAO,SAASlB,MAAT,CAAgB2B,IAAhB,EAAsBC,KAAtB,EAA6B;SAC3BnC,YAAU,CAACkC,IAAD,CAAV,CAAiB3B,MAAjB,CAAwB4B,KAAxB,CAAP;;;;;;;;;;;;;;"}