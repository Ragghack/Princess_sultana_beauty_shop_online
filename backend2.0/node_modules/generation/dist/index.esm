function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function generator(source) {
  if (typeof source === 'function') {
    return source;
  } else if (typeof source[Symbol.iterator] === 'function') {
    return regeneratorRuntime.mark(function generate() {
      return regeneratorRuntime.wrap(function generate$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              return _context.delegateYield(source, "t0", 1);

            case 1:
            case "end":
              return _context.stop();
          }
        }
      }, generate, this);
    });
  } else {
    throw new Error("'".concat(source, "' must be either a generator function or an iterable"));
  }
}

var Generation = function () {
  function Generation() {
    var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

    _classCallCheck(this, Generation);

    Object.defineProperty(this, Symbol.iterator, {
      value: generator(source)
    });
  }

  _createClass(Generation, [{
    key: "equals",
    value: function equals(source) {
      return this.disjunct(source).length === 0;
    }
  }, {
    key: "map",
    value: function map(fn) {
      return new Generation(regeneratorRuntime.mark(function _callee() {
        var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, x;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _iteratorNormalCompletion = true;
                _didIteratorError = false;
                _iteratorError = undefined;
                _context.prev = 3;
                _iterator = this[Symbol.iterator]();

              case 5:
                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                  _context.next = 12;
                  break;
                }

                x = _step.value;
                _context.next = 9;
                return fn(x);

              case 9:
                _iteratorNormalCompletion = true;
                _context.next = 5;
                break;

              case 12:
                _context.next = 18;
                break;

              case 14:
                _context.prev = 14;
                _context.t0 = _context["catch"](3);
                _didIteratorError = true;
                _iteratorError = _context.t0;

              case 18:
                _context.prev = 18;
                _context.prev = 19;

                if (!_iteratorNormalCompletion && _iterator.return != null) {
                  _iterator.return();
                }

              case 21:
                _context.prev = 21;

                if (!_didIteratorError) {
                  _context.next = 24;
                  break;
                }

                throw _iteratorError;

              case 24:
                return _context.finish(21);

              case 25:
                return _context.finish(18);

              case 26:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[3, 14, 18, 26], [19,, 21, 25]]);
      }).bind(this));
    }
  }, {
    key: "filter",
    value: function filter(fn) {
      return new Generation(regeneratorRuntime.mark(function _callee2() {
        var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, item;

        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _iteratorNormalCompletion2 = true;
                _didIteratorError2 = false;
                _iteratorError2 = undefined;
                _context2.prev = 3;
                _iterator2 = this[Symbol.iterator]();

              case 5:
                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
                  _context2.next = 13;
                  break;
                }

                item = _step2.value;

                if (!fn(item)) {
                  _context2.next = 10;
                  break;
                }

                _context2.next = 10;
                return item;

              case 10:
                _iteratorNormalCompletion2 = true;
                _context2.next = 5;
                break;

              case 13:
                _context2.next = 19;
                break;

              case 15:
                _context2.prev = 15;
                _context2.t0 = _context2["catch"](3);
                _didIteratorError2 = true;
                _iteratorError2 = _context2.t0;

              case 19:
                _context2.prev = 19;
                _context2.prev = 20;

                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
                  _iterator2.return();
                }

              case 22:
                _context2.prev = 22;

                if (!_didIteratorError2) {
                  _context2.next = 25;
                  break;
                }

                throw _iteratorError2;

              case 25:
                return _context2.finish(22);

              case 26:
                return _context2.finish(19);

              case 27:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[3, 15, 19, 27], [20,, 22, 26]]);
      }).bind(this));
    }
  }, {
    key: "concat",
    value: function concat(source) {
      return new Generation(regeneratorRuntime.mark(function _callee3() {
        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.delegateYield(this, "t0", 1);

              case 1:
                return _context3.delegateYield(new Generation(source), "t1", 2);

              case 2:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }).bind(this));
    }
  }, {
    key: "union",
    value: function union(source) {
      return new Generation(regeneratorRuntime.mark(function _callee4() {
        var seen, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, x, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, y;

        return regeneratorRuntime.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                seen = new Set();
                _iteratorNormalCompletion3 = true;
                _didIteratorError3 = false;
                _iteratorError3 = undefined;
                _context4.prev = 4;
                _iterator3 = this[Symbol.iterator]();

              case 6:
                if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {
                  _context4.next = 15;
                  break;
                }

                x = _step3.value;

                if (seen.has(x)) {
                  _context4.next = 12;
                  break;
                }

                seen.add(x);
                _context4.next = 12;
                return x;

              case 12:
                _iteratorNormalCompletion3 = true;
                _context4.next = 6;
                break;

              case 15:
                _context4.next = 21;
                break;

              case 17:
                _context4.prev = 17;
                _context4.t0 = _context4["catch"](4);
                _didIteratorError3 = true;
                _iteratorError3 = _context4.t0;

              case 21:
                _context4.prev = 21;
                _context4.prev = 22;

                if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
                  _iterator3.return();
                }

              case 24:
                _context4.prev = 24;

                if (!_didIteratorError3) {
                  _context4.next = 27;
                  break;
                }

                throw _iteratorError3;

              case 27:
                return _context4.finish(24);

              case 28:
                return _context4.finish(21);

              case 29:
                _iteratorNormalCompletion4 = true;
                _didIteratorError4 = false;
                _iteratorError4 = undefined;
                _context4.prev = 32;
                _iterator4 = new Generation(source)[Symbol.iterator]();

              case 34:
                if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {
                  _context4.next = 43;
                  break;
                }

                y = _step4.value;

                if (seen.has(y)) {
                  _context4.next = 40;
                  break;
                }

                seen.add(y);
                _context4.next = 40;
                return y;

              case 40:
                _iteratorNormalCompletion4 = true;
                _context4.next = 34;
                break;

              case 43:
                _context4.next = 49;
                break;

              case 45:
                _context4.prev = 45;
                _context4.t1 = _context4["catch"](32);
                _didIteratorError4 = true;
                _iteratorError4 = _context4.t1;

              case 49:
                _context4.prev = 49;
                _context4.prev = 50;

                if (!_iteratorNormalCompletion4 && _iterator4.return != null) {
                  _iterator4.return();
                }

              case 52:
                _context4.prev = 52;

                if (!_didIteratorError4) {
                  _context4.next = 55;
                  break;
                }

                throw _iteratorError4;

              case 55:
                return _context4.finish(52);

              case 56:
                return _context4.finish(49);

              case 57:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this, [[4, 17, 21, 29], [22,, 24, 28], [32, 45, 49, 57], [50,, 52, 56]]);
      }).bind(this));
    }
  }, {
    key: "intersect",
    value: function intersect(source) {
      return new Generation(regeneratorRuntime.mark(function _callee5() {
        var seen, _iteratorNormalCompletion5, _didIteratorError5, _iteratorError5, _iterator5, _step5, x;

        return regeneratorRuntime.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                seen = new Set();
                _iteratorNormalCompletion5 = true;
                _didIteratorError5 = false;
                _iteratorError5 = undefined;
                _context5.prev = 4;

                for (_iterator5 = new Generation(source)[Symbol.iterator](); !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                  x = _step5.value;
                  seen.add(x);
                }

                _context5.next = 12;
                break;

              case 8:
                _context5.prev = 8;
                _context5.t0 = _context5["catch"](4);
                _didIteratorError5 = true;
                _iteratorError5 = _context5.t0;

              case 12:
                _context5.prev = 12;
                _context5.prev = 13;

                if (!_iteratorNormalCompletion5 && _iterator5.return != null) {
                  _iterator5.return();
                }

              case 15:
                _context5.prev = 15;

                if (!_didIteratorError5) {
                  _context5.next = 18;
                  break;
                }

                throw _iteratorError5;

              case 18:
                return _context5.finish(15);

              case 19:
                return _context5.finish(12);

              case 20:
                return _context5.delegateYield(this.filter(function (y) {
                  return seen.has(y);
                }), "t1", 21);

              case 21:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this, [[4, 8, 12, 20], [13,, 15, 19]]);
      }).bind(this));
    }
  }, {
    key: "disjunct",
    value: function disjunct(source) {
      return new Generation(regeneratorRuntime.mark(function _callee6() {
        var seen, disjunction, _iteratorNormalCompletion6, _didIteratorError6, _iteratorError6, _iterator6, _step6, x, _iteratorNormalCompletion7, _didIteratorError7, _iteratorError7, _iterator7, _step7, y;

        return regeneratorRuntime.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                seen = new Set();
                disjunction = new Set();
                _iteratorNormalCompletion6 = true;
                _didIteratorError6 = false;
                _iteratorError6 = undefined;
                _context6.prev = 5;

                for (_iterator6 = this[Symbol.iterator](); !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                  x = _step6.value;
                  seen.add(x);
                  disjunction.add(x);
                }

                _context6.next = 13;
                break;

              case 9:
                _context6.prev = 9;
                _context6.t0 = _context6["catch"](5);
                _didIteratorError6 = true;
                _iteratorError6 = _context6.t0;

              case 13:
                _context6.prev = 13;
                _context6.prev = 14;

                if (!_iteratorNormalCompletion6 && _iterator6.return != null) {
                  _iterator6.return();
                }

              case 16:
                _context6.prev = 16;

                if (!_didIteratorError6) {
                  _context6.next = 19;
                  break;
                }

                throw _iteratorError6;

              case 19:
                return _context6.finish(16);

              case 20:
                return _context6.finish(13);

              case 21:
                _iteratorNormalCompletion7 = true;
                _didIteratorError7 = false;
                _iteratorError7 = undefined;
                _context6.prev = 24;
                _iterator7 = new Generation(source)[Symbol.iterator]();

              case 26:
                if (_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done) {
                  _context6.next = 37;
                  break;
                }

                y = _step7.value;

                if (!seen.has(y)) {
                  _context6.next = 32;
                  break;
                }

                disjunction.delete(y);
                _context6.next = 34;
                break;

              case 32:
                _context6.next = 34;
                return y;

              case 34:
                _iteratorNormalCompletion7 = true;
                _context6.next = 26;
                break;

              case 37:
                _context6.next = 43;
                break;

              case 39:
                _context6.prev = 39;
                _context6.t1 = _context6["catch"](24);
                _didIteratorError7 = true;
                _iteratorError7 = _context6.t1;

              case 43:
                _context6.prev = 43;
                _context6.prev = 44;

                if (!_iteratorNormalCompletion7 && _iterator7.return != null) {
                  _iterator7.return();
                }

              case 46:
                _context6.prev = 46;

                if (!_didIteratorError7) {
                  _context6.next = 49;
                  break;
                }

                throw _iteratorError7;

              case 49:
                return _context6.finish(46);

              case 50:
                return _context6.finish(43);

              case 51:
                return _context6.delegateYield(disjunction, "t2", 52);

              case 52:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this, [[5, 9, 13, 21], [14,, 16, 20], [24, 39, 43, 51], [44,, 46, 50]]);
      }).bind(this));
    }
  }, {
    key: "reduce",
    value: function reduce(fn, initial) {

      function reduce(fn, iterator, result) {
        var next = iterator.next();

        if (next.done) {
          return result;
        } else {
          return reduce(fn, iterator, fn(result, next.value));
        }
      }

      return reduce(fn, this[Symbol.iterator](), initial);
    }
  }, {
    key: "length",
    get: function get() {
      var length = 0;
      var _iteratorNormalCompletion8 = true;
      var _didIteratorError8 = false;
      var _iteratorError8 = undefined;

      try {
        for (var _iterator8 = this[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
          var x = _step8.value;
          length++;
        }
      } catch (err) {
        _didIteratorError8 = true;
        _iteratorError8 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion8 && _iterator8.return != null) {
            _iterator8.return();
          }
        } finally {
          if (_didIteratorError8) {
            throw _iteratorError8;
          }
        }
      }

      return length;
    }
  }]);

  return Generation;
}();

function Generation$1(iterable) {
  return new Generation(iterable);
}
function map(iterable, fn) {
  return Generation$1(iterable).map(fn);
}
function filter(iterable, fn) {
  return Generation$1(iterable).filter(fn);
}
function concat() {
  for (var _len = arguments.length, iterables = new Array(_len), _key = 0; _key < _len; _key++) {
    iterables[_key] = arguments[_key];
  }

  return iterables.reduce(function (generation, iterable) {
    return generation.concat(iterable);
  }, Generation$1());
}
function union() {
  for (var _len2 = arguments.length, iterables = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    iterables[_key2] = arguments[_key2];
  }

  return iterables.reduce(function (generation, iterable) {
    return generation.union(iterable);
  }, Generation$1());
}
function intersect(first) {
  if (first) {
    for (var _len3 = arguments.length, iterables = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      iterables[_key3 - 1] = arguments[_key3];
    }

    return Generation$1(first).intersect(union.apply(void 0, iterables));
  } else {
    return Generation$1();
  }
}
function disjunct() {
  for (var _len4 = arguments.length, iterables = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    iterables[_key4] = arguments[_key4];
  }

  return iterables.reduce(function (generation, iterable) {
    return generation.disjunct(iterable);
  }, Generation$1());
}
function reduce(source, fn, initial) {
  return Generation$1(source).reduce(fn, initial);
}
function equals(left, right) {
  return Generation$1(left).equals(right);
}

export default Generation$1;
export { Generation$1 as Generation, map, filter, concat, union, intersect, disjunct, reduce, equals };
//# sourceMappingURL=index.esm.map
