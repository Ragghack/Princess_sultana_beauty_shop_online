{"version":3,"file":"index.esm.js","sources":["../src/generator.js","../src/generation.js","../index.js"],"sourcesContent":["export default function generator(source) {\n  if (typeof source === 'function') {\n    return source;\n  } else if (typeof source[Symbol.iterator] === 'function') {\n    return function* generate() {\n      yield* source;\n    }\n  } else {\n    throw new Error(`'${source}' must be either a generator function or an iterable`);\n  }\n}\n","import generator from './generator';\n\nexport default class Generation {\n  constructor(source = []) {\n    Object.defineProperty(this, Symbol.iterator, {\n      value: generator(source)\n    });\n  }\n\n  get length() {\n    let length = 0;\n    for (let x of this) { length++; }\n    return length;\n  }\n\n  equals(source) {\n    return this.disjunct(source).length === 0;\n  }\n\n  map(fn) {\n    return new Generation(function*() {\n      for (let x of this) {\n        yield fn(x);\n      }\n    }.bind(this));\n  }\n\n  filter(fn) {\n    return new Generation(function*() {\n      for (let item of this) {\n        if (fn(item)) {\n          yield item;\n        }\n      }\n    }.bind(this))\n  }\n\n  concat(source) {\n    return new Generation(function*() {\n      yield* this;\n      yield* new Generation(source);\n    }.bind(this));\n  }\n\n  union(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      for (let x of this) {\n        if (!seen.has(x)) {\n          seen.add(x);\n          yield x;\n        }\n      }\n      for (let y of new Generation(source)) {\n        if (!seen.has(y)) {\n          seen.add(y);\n          yield y;\n        }\n      }\n    }.bind(this));\n  }\n\n  intersect(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      for (let x of new Generation(source)) {\n        seen.add(x);\n      }\n      yield* this.filter(y => seen.has(y))\n    }.bind(this));\n  }\n\n  disjunct(source) {\n    return new Generation(function*() {\n      let seen = new Set();\n      let disjunction = new Set();\n      for (let x of this) {\n        seen.add(x)\n        disjunction.add(x);\n      }\n      for (let y of new Generation(source)) {\n        if (seen.has(y)) {\n          disjunction.delete(y);\n        } else {\n          yield y;\n        }\n      }\n      yield* disjunction;\n    }.bind(this))\n  }\n\n  reduce(fn, initial) {\n    let result = initial;\n    function reduce(fn, iterator, result) {\n      let next = iterator.next();\n      if (next.done) {\n        return result;\n      } else {\n        return reduce(fn, iterator, fn(result, next.value))\n      }\n    }\n\n    return reduce(fn, this[Symbol.iterator](), initial);\n  }\n}\n","import _Generation from './src/generation';\n\nexport function Generation(iterable) {\n  return new _Generation(iterable);\n}\n\nexport function map(iterable, fn) {\n  return Generation(iterable).map(fn);\n}\n\nexport function filter(iterable, fn) {\n  return Generation(iterable).filter(fn);\n}\n\nexport function concat(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.concat(iterable);\n  }, Generation());\n}\n\nexport function union(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.union(iterable);\n  }, Generation());\n}\n\nexport function intersect(first, ...iterables) {\n  if (first) {\n    return Generation(first).intersect(union(...iterables));\n  } else {\n    return Generation();\n  }\n}\n\nexport function disjunct(...iterables) {\n  return iterables.reduce((generation, iterable) => {\n    return generation.disjunct(iterable);\n  }, Generation())\n}\n\nexport function reduce(source, fn, initial) {\n  return Generation(source).reduce(fn, initial);\n}\n\nexport function equals(left, right) {\n  return Generation(left).equals(right);\n}\n\nexport default Generation;\n"],"names":["generator","source","Symbol","iterator","generate","Error","Generation","Object","defineProperty","value","disjunct","length","fn","x","bind","item","seen","Set","has","add","y","filter","disjunction","delete","initial","reduce","result","next","done","iterable","_Generation","map","concat","iterables","generation","union","intersect","first","equals","left","right"],"mappings":"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"}